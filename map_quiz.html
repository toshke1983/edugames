<!DOCTYPE html>
<html>
<head>
    <title>Geo Quiz Master</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #f4f7f6; padding: 20px; }
        #setup-menu { background: white; padding: 40px; border-radius: 20px; max-width: 600px; margin: 50px auto; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        #game-container { position: relative; margin: 0 auto; max-width: 1000px; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .menu-btn { padding: 15px 30px; margin: 10px; font-size: 1.2em; cursor: pointer; border-radius: 10px; border: none; background: #3498db; color: white; transition: 0.2s; }
        .menu-btn:hover { background: #2980b9; transform: translateY(-2px); }
        svg { width: 100%; height: auto; max-height: 65vh; margin-top: 15px; }
        svg path { fill: #d1d8e0; stroke: #fff; stroke-width: 0.5; cursor: pointer; transition: 0.2s; }
        svg path:hover { fill: #45aaf2 !important; }
        #target-display { font-size: 2.2em; margin: 20px 0; min-height: 1.5em; }
        #score-board { font-size: 1.5em; font-weight: bold; color: #2ecc71; margin-bottom: 10px; }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        /* The Success Popup Background */
    `   #success-overlay { display: none; /* Hidden by default */ position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); /* Dim the background */ z-index: 1000;\
                           justify-content: center; align-items: center;}
        /* The Success Card */
        .success-card { background: white; padding: 40px; border-radius: 30px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3); animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        max-width: 80%;}
        @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; }}
        .success-card h2 { font-size: 3em; margin: 10px 0; color: #2d3436; }
        .success-card p { font-size: 1.5em; color: #636e72; margin: 5px 0; }
        .success-card .big-thumb { font-size: 4em; display: block; margin-bottom: 10px; }
    </style>
</head>
<body>
<div id="success-overlay">
    <div class="success-card">
        <span class="big-thumb">ğŸ‘</span>
        <h2 id="win-name"></h2>
        <p id="win-meta"></p>
    </div>
</div>
    
<div id="setup-menu">
    <h1>ğŸŒ Geo Quiz Master</h1>
    <p>Select Language / Jezik / Sprache:</p>
    <button class="menu-btn" onclick="UI.setLang('en')">English ğŸ‡¬ğŸ‡§</button>
    <button class="menu-btn" onclick="UI.setLang('de')">Deutsch ğŸ‡©ğŸ‡ª</button>
    <button class="menu-btn" onclick="UI.setLang('sr')">Srpski ğŸ‡·ğŸ‡¸</button>
    
    <div id="map-select" style="display:none; margin-top:30px; border-top: 1px solid #eee; padding-top: 20px;">
        <p>Select Map:</p>
        <button class="menu-btn" style="background:#2ecc71" onclick="UI.startGame('europe')">Europe ğŸ‡ªğŸ‡º</button>
        <button class="menu-btn" style="background:#e74c3c" onclick="UI.startGame('switzerland')">Switzerland ğŸ‡¨ğŸ‡­</button>
    </div>
</div>

<div id="game-container" style="display:none;">
    <button class="menu-btn" onclick="UI.goHome()" style="background:#7f8c8d; position: absolute; top: 10px; right: 10px; padding: 5px 15px; font-size: 0.9em;">
    ğŸ  Home
    </button>
    <div id="score-board">
        <span id="label-score">Score</span>: <span id="score">0</span> | 
        <span id="label-streak">Streak</span>: <span id="streak">0</span> ğŸ”¥ |
        Best: <span id="best-streak">0</span> ğŸ†
    </div>
    <div id="target-display"></div>
    <button class="menu-btn" id="skip-btn" onclick="UI.skipItem()" style="background:#95a5a6">Skip</button>
    <div id="message"></div>
    <div id="map-placeholder"></div>
</div>

<script type="module">
    import * as GameEngine from './game.js';
    // We attach the functions to a global object so the HTML buttons can see them
    window.UI = GameEngine;
</script>

</body>
</html>
