<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rabbit's Reading Journey</title>
	<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üê∞</text></svg>">

	<link rel="apple-touch-icon" href="https://img.icons8.com/color/192/rabbit.png">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="Reading Game">
	
    <style>
        :root {
            --primary-bg: #e3f2fd;
            --card-bg: #ffffff;
            --btn-color: #4a90e2;
            --correct-color: #4caf50;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--primary-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 10px;
            overflow-x: hidden;
        }

        #game-container {
            max-width: 700px;
            width: 100%;
            text-align: center;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        /* Language Switcher */
        .lang-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lang-btn {
            font-size: 1.2rem;
            padding: 10px 20px;
            cursor: pointer;
            border: 2px solid #ddd;
            border-radius: 15px;
            background: #fff;
            transition: all 0.3s;
        }

        .lang-btn.active {
            border-color: var(--btn-color);
            background: var(--btn-color);
            color: white;
            transform: scale(1.1);
        }

        #image-display {
            font-size: 140px;
            margin: 10px 0;
            min-height: 160px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .word-btn {
            font-size: 2.2rem;
            font-weight: bold;
            padding: 15px;
            cursor: pointer;
            border: 4px solid #eee;
            background: white;
            border-radius: 15px;
        }

        .first-letter {
	    font-size: 1.3em; /* 30% larger than the rest of the word */
	    color: #e91e63;   /* A bright, distinct pink/red color */
	    margin-right: 2px;
	}

        .correct { background-color: var(--correct-color) !important; color: white; border-color: #2e7d32; }
        .wrong { background-color: #ffcdd2 !important; opacity: 0.5; }

        /* Rabbit Trail Gamification */
        #trail-container {
            width: 100%;
            max-width: 700px;
            background: #dcedc8;
            padding: 20px 0;
            border-radius: 50px;
            position: relative;
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 4px solid #8bc34a;
        }

        .step {
            width: 40px;
            height: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 5px;
            flex-grow: 1;
            margin: 0 5px;
        }

        #rabbit {
            font-size: 50px;
            position: absolute;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            left: 5px;
            z-index: 10;
        }

        #carrot { font-size: 50px; margin-right: 15px; }

        #celebration-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.9);
            z-index: 100;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
    </style>
</head>
<body>

<div id="game-container">
	<div class="lang-tabs">
	    <button class="lang-btn" id="btn-en" onclick="setLang('en')">English üá¨üáß</button>
	    <button class="lang-btn" id="btn-de" onclick="setLang('de')">Deutsch üá©üá™</button>
	    <button class="lang-btn" id="btn-sr" onclick="setLang('sr')">Srpski (Lat) üá∑üá∏</button>
	    <button class="lang-btn" id="btn-sr-cyr" onclick="setLang('sr-cyr')">–°—Ä–ø—Å–∫–∏ (–ã–∏—Ä) üá∑üá∏</button>
	</div>

    <div id="image-display"></div>
    <div class="options-grid" id="options-container"></div>
</div>

<div id="trail-container">
    <div id="rabbit">üê∞</div>
    <div class="step"></div><div class="step"></div><div class="step"></div>
    <div class="step"></div><div class="step"></div><div class="step"></div>
    <div class="step"></div><div class="step"></div>
    <div id="carrot">ü•ï</div>
</div>

<div id="celebration-overlay">
    <h1 style="font-size: 4rem;">üéâ BRAVO! üéâ</h1>
    <p style="font-size: 2rem;">The rabbit got the carrot!</p>
    <button onclick="resetGame()" style="font-size: 2rem; padding: 20px 40px; cursor: pointer; border-radius: 20px; background: #ff9800; color: white; border: none;">Play Again</button>
</div>

<script>
    const gameData = [
        // Animals
        { emoji: "üçé", en: "Apple", de: "Apfel", sr: "Jabuka" },
        { emoji: "üêª", en: "Bear", de: "B√§r", sr: "Medved" },
        { emoji: "üê±", en: "Cat", de: "Katze", sr: "Maƒçka" },
        { emoji: "üê∂", en: "Dog", de: "Hund", sr: "Pas" },
        { emoji: "üêò", en: "Elephant", de: "Elefant", sr: "Slon" },
        { emoji: "üêü", en: "Fish", de: "Fisch", sr: "Riba" },
        { emoji: "ü¶í", en: "Giraffe", de: "Giraffe", sr: "≈Ωirafa" },
        { emoji: "ü¶Å", en: "Lion", de: "L√∂we", sr: "Lav" },
        { emoji: "üêí", en: "Monkey", de: "Affe", sr: "Majmun" },
        { emoji: "üêß", en: "Penguin", de: "Pinguin", sr: "Pingvin" },
        { emoji: "üêØ", en: "Tiger", de: "Tiger", sr: "Tigar" },
        { emoji: "ü¶ì", en: "Zebra", de: "Zebra", sr: "Zebra" },
        // Fruits/Veg
        { emoji: "üçå", en: "Banana", de: "Banane", sr: "Banana" },
        { emoji: "ü•¶", en: "Broccoli", de: "Brokkoli", sr: "Brokoli" },
        { emoji: "üçí", en: "Cherry", de: "Kirsche", sr: "Tre≈°nja" },
        { emoji: "üåΩ", en: "Corn", de: "Mais", sr: "Kukuruz" },
        { emoji: "üçá", en: "Grape", de: "Traube", sr: "Gro≈æƒëe" },
        { emoji: "üçã", en: "Lemon", de: "Zitrone", sr: "Limun" },
        { emoji: "üßÖ", en: "Onion", de: "Zwiebel", sr: "Luk" },
        { emoji: "üçê", en: "Pear", de: "Birne", sr: "Kru≈°ka" },
        { emoji: "üçì", en: "Strawberry", de: "Erdbeere", sr: "Jagoda" },
        { emoji: "üçÖ", en: "Tomato", de: "Tomate", sr: "Paradajz" },
        { emoji: "üçâ", en: "Watermelon", de: "Wassermelone", sr: "Lubenica" },
        { emoji: "ü•î", en: "Potato", de: "Kartoffel", sr: "Krompir" },
        
		// ANIMALS
		{ emoji: "üêú", en: "Ant", de: "Ameise", sr: "Mrav" },
		{ emoji: "üêù", en: "Bee", de: "Biene", sr: "Pƒçela" },
		{ emoji: "ü¶ã", en: "Butterfly", de: "Schmetterling", sr: "Leptir" },
		{ emoji: "üê™", en: "Camel", de: "Kamel", sr: "Kamila" },
		{ emoji: "üêÑ", en: "Cow", de: "Kuh", sr: "Krava" },
		{ emoji: "üêä", en: "Crocodile", de: "Krokodil", sr: "Krokodil" },
		{ emoji: "ü¶å", en: "Deer", de: "Hirsch", sr: "Jelen" },
		{ emoji: "üê¨", en: "Dolphin", de: "Delphin", sr: "Delfin" },
		{ emoji: "ü¶Ü", en: "Duck", de: "Ente", sr: "Patka" },
		{ emoji: "üê∏", en: "Frog", de: "Frosch", sr: "≈Ωaba" },
		{ emoji: "üêê", en: "Goat", de: "Ziege", sr: "Koza" },
		{ emoji: "üêé", en: "Horse", de: "Pferd", sr: "Konj" },
		{ emoji: "ü¶ò", en: "Kangaroo", de: "K√§nguru", sr: "Kengur" },
		{ emoji: "üê≠", en: "Mouse", de: "Maus", sr: "Mi≈°" },
		{ emoji: "ü¶â", en: "Owl", de: "Eule", sr: "Sova" },
		{ emoji: "üê∑", en: "Pig", de: "Schwein", sr: "Svinja" },
		{ emoji: "üêá", en: "Rabbit", de: "Hase", sr: "Zec" },
		{ emoji: "ü¶à", en: "Shark", de: "Hai", sr: "Ajkula" },
		{ emoji: "üêö", en: "Snail", de: "Schnecke", sr: "Pu≈æ" },
		{ emoji: "üêç", en: "Snake", de: "Schlange", sr: "Zmija" },
		{ emoji: "üê¢", en: "Turtle", de: "Schildkr√∂te", sr: "Kornjaƒça" },
		{ emoji: "üêã", en: "Whale", de: "Wal", sr: "Kit" },
		{ emoji: "üê∫", en: "Wolf", de: "Wolf", sr: "Vuk" },
	
		// FRUITS & VEGETABLES
		{ emoji: "ü•ë", en: "Avocado", de: "Avocado", sr: "Avokado" },
		{ emoji: "ü´ê", en: "Blueberry", de: "Blaubeere", sr: "Borovnica" },
		{ emoji: "ü•ï", en: "Carrot", de: "Karotte", sr: "≈†argarepa" },
		{ emoji: "ü•í", en: "Cucumber", de: "Gurke", sr: "Krastavac" },
		{ emoji: "üçÜ", en: "Eggplant", de: "Aubergine", sr: "Plavi patlid≈æan" },
		{ emoji: "ü´ö", en: "Ginger", de: "Ingwer", sr: "ƒêumbir" },
		{ emoji: "ü•ù", en: "Kiwi", de: "Kiwi", sr: "Kivi" },
		{ emoji: "ü•≠", en: "Mango", de: "Mango", sr: "Mango" },
		{ emoji: "üçÑ", en: "Mushroom", de: "Pilz", sr: "Peƒçurka" },
		{ emoji: "üçä", en: "Orange", de: "Orange", sr: "Pomorand≈æa" },
		{ emoji: "üçë", en: "Peach", de: "Pfirsich", sr: "Breskva" },
		{ emoji: "üçç", en: "Pineapple", de: "Ananas", sr: "Ananas" },
		{ emoji: "üéÉ", en: "Pumpkin", de: "K√ºrbis", sr: "Bundeva" },
//		{ emoji: "üçá", en: "Raisin", de: "Rosine", sr: "Suvo gro≈æƒëe" },
		{ emoji: "ü•¨", en: "Salad", de: "Salat", sr: "Zelena salata" },
	
		// HOUSEHOLD & NATURE (Simple for kids)
		{ emoji: "üéà", en: "Balloon", de: "Ballon", sr: "Balon" },
		{ emoji: "üõå", en: "Bed", de: "Bett", sr: "Krevet" },
		{ emoji: "üö≤", en: "Bicycle", de: "Fahrrad", sr: "Bicikl" },
		{ emoji: "üìñ", en: "Book", de: "Buch", sr: "Knjiga" },
		{ emoji: "üë¢", en: "Boot", de: "Stiefel", sr: "ƒåizma" },
		{ emoji: "üöå", en: "Bus", de: "Bus", sr: "Autobus" },
		{ emoji: "üöó", en: "Car", de: "Auto", sr: "Auto" },
		{ emoji: "‚òÅÔ∏è", en: "Cloud", de: "Wolke", sr: "Oblak" },
		{ emoji: "üëó", en: "Dress", de: "Kleid", sr: "Haljina" },
		{ emoji: "üå∏", en: "Flower", de: "Blume", sr: "Cvet" },
		{ emoji: "üß§", en: "Glove", de: "Handschuh", sr: "Rukavica" },
		{ emoji: "üî®", en: "Hammer", de: "Hammer", sr: "ƒåekiƒá" },
		{ emoji: "üé©", en: "Hat", de: "Hut", sr: "≈†e≈°ir" },
		{ emoji: "üîë", en: "Key", de: "Schl√ºssel", sr: "Kljuƒç" },
		{ emoji: "üåô", en: "Moon", de: "Mond", sr: "Mesec" },
		{ emoji: "‚õ∞Ô∏è", en: "Mountain", de: "Berg", sr: "Planina" },
		{ emoji: "üåà", en: "Rainbow", de: "Regenbogen", sr: "Duga" },
		{ emoji: "üöÄ", en: "Rocket", de: "Rakete", sr: "Raketa" },
		{ emoji: "üö¢", en: "Ship", de: "Schiff", sr: "Brod" },
		{ emoji: "üëü", en: "Shoe", de: "Schuh", sr: "Cipela" },
		{ emoji: "üåü", en: "Star", de: "Stern", sr: "Zvezda" },
		// { emoji: "üß∏", en: "Toy", de: "Spielzeug", sr: "Igraƒçka" }
    ];

    let currentLanguage = 'de';
    let currentStep = 0;
    const totalSteps = 8;

    function setLang(lang) {
        currentLanguage = lang;
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-' + lang).classList.add('active');
        nextQuestion();
    }

	function toCyrillic(text) {
	    const map = {
	        'A':'–ê', 'B':'–ë', 'V':'–í', 'G':'–ì', 'D':'–î', 'ƒê':'–Ç', 'E':'–ï', '≈Ω':'–ñ', 'Z':'–ó', 'I':'–ò',
	        'J':'–à', 'K':'–ö', 'L':'–õ', 'Lj':'–â', 'M':'–ú', 'N':'–ù', 'Nj':'–ä', 'O':'–û', 'P':'–ü', 'R':'–†',
	        'S':'–°', 'T':'–¢', 'ƒÜ':'–ã', 'U':'–£', 'F':'–§', 'H':'–•', 'C':'–¶', 'ƒå':'–ß', 'D≈æ':'–è', '≈†':'–®',
	        'a':'–∞', 'b':'–±', 'v':'–≤', 'g':'–≥', 'd':'–¥', 'ƒë':'—í', 'e':'–µ', '≈æ':'–∂', 'z':'–∑', 'i':'–∏',
	        'j':'—ò', 'k':'–∫', 'l':'–ª', 'lj':'—ô', 'm':'–º', 'n':'–Ω', 'nj':'—ö', 'o':'–æ', 'p':'–ø', 'r':'—Ä',
	        's':'—Å', 't':'—Ç', 'ƒá':'—õ', 'u':'—É', 'f':'—Ñ', 'h':'—Ö', 'c':'—Ü', 'ƒç':'—á', 'd≈æ':'—ü', '≈°':'—à'
	    };
	    // Handle double letters like Nj, Lj, D≈æ first
	    let result = text.replace(/Nj|Lj|D≈æ|nj|lj|d≈æ/g, m => map[m]);
	    // Handle single letters
	    return result.split('').map(char => map[char] || char).join('');
	}

	function nextQuestion() {
	    let item;
	    let correctWord;
	    let attempts = 0;
	
	    // Loop until we find a word with 6 letters or fewer
	    while (attempts < 100) {
	        item = gameData[Math.floor(Math.random() * gameData.length)];
	        // LOGIC FOR CYRILLIC SWITCHING
	        if (currentLanguage === 'sr-cyr') {
	            correctWord = toCyrillic(item['sr']);
	        } else {
	            correctWord = item[currentLanguage];
	        }
	        
	        if (correctWord.length <= 6) {
	            break; // Found one!
	        }
	        attempts++;
	    }
	
	    document.getElementById('image-display').innerText = item.emoji;
	    
	    let options = [correctWord];
	    let usedLetters = [correctWord[0].toUpperCase()];
	
	    // Generate distractors - we should also keep these under 6 letters for consistency
	    while (options.length < 4) {
	        let rand = gameData[Math.floor(Math.random() * gameData.length)];
			let word = (currentLanguage === 'sr-cyr') ? toCyrillic(rand['sr']) : rand[currentLanguage];
			let firstLetter = word[0].toUpperCase();
	        
	        if (word.length <= 6 && !usedLetters.includes(firstLetter)) {
	            options.push(word);
	            usedLetters.push(firstLetter);
	        }
	    }
	
	    options.sort(() => Math.random() - 0.5);
	    const container = document.getElementById('options-container');
	    container.innerHTML = '';
	    options.forEach(word => {
	        const btn = document.createElement('button');
	        btn.className = 'word-btn';
	        
	        // Split the word: First letter and the rest
	        const first = word.charAt(0).toUpperCase();
	        const rest = word.slice(1).toLowerCase(); // Keep rest lowercase for contrast
	
	        // Use innerHTML to inject the styled span
	        btn.innerHTML = `<span class="first-letter">${first}</span>${rest}`;
	        
	        btn.onclick = () => checkAnswer(btn, word === correctWord);
	        container.appendChild(btn);
	    });
	}

    function checkAnswer(btn, isCorrect) {
        if (isCorrect) {
            btn.classList.add('correct');
            currentStep++;
            updateRabbit();
            
            if (currentStep >= totalSteps) {
                setTimeout(() => { document.getElementById('celebration-overlay').style.display = 'flex'; }, 500);
            } else {
                setTimeout(nextQuestion, 1000);
            }
        } else {
            btn.classList.add('wrong');
        }
    }

    function updateRabbit() {
        const trail = document.getElementById('trail-container');
        const rabbit = document.getElementById('rabbit');
        const width = trail.offsetWidth - 80;
        const progress = (currentStep / totalSteps) * width;
        rabbit.style.left = progress + 'px';
    }

    function resetGame() {
        currentStep = 0;
        updateRabbit();
        document.getElementById('celebration-overlay').style.display = 'none';
        nextQuestion();
    }

    window.onresize = updateRabbit;
    nextQuestion();
</script>
</body>
</html>
